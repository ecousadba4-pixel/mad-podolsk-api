/* Global layout & base elements */

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	font-family: var(--font-sans);
	background: var(--gradient-page);
	color: var(--text-main);
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
}

/* Toasts (could be moved to a components file later) */
.toast {
	position: fixed;
	bottom: 24px;
	right: 24px;
	background: var(--bg-card);
	padding: 16px 24px;
	border-radius: var(--radius-md);
	box-shadow: var(--shadow-soft);
	animation: slideIn 0.3s ease;
	z-index: 1000;
}

.toast.success {
	border-left: 4px solid var(--success);
}

.toast.error {
	border-left: 4px solid var(--danger);
}

@keyframes slideIn {
	from {
		transform: translateX(400px);
		opacity: 0;
	}
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

.page {
	max-width: 1180px;
	margin: 0 auto;
	padding: 16px clamp(12px, 3vw, 28px) 48px;
}

/* Page content wrapper used by App.vue */
.page__content {
  padding: 24px;
  flex-grow: 1;
}

header {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-bottom: var(--section-gap);
        padding: clamp(var(--gap-md), 2vw, var(--gap-lg)) 0;
}

@media (min-width: 880px) {
        .page {
                padding: 32px 32px 72px;
        }
        header {
                flex-direction: row;
                justify-content: space-between;
                align-items: flex-end;
        }
        .controls {
                flex-wrap: nowrap;
                align-items: center;
        }
}

.title-block {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.title {
	font-size: clamp(1.4rem, 2vw, var(--font-size-h1));
	font-weight: 700;
	letter-spacing: 0.04em;
	text-transform: uppercase;
	color: var(--text-main);
}

.subtitle {
	font-size: var(--font-size-body);
	color: var(--text-muted);
	max-width: 640px;
}

.page[data-view-mode="daily"] .monthly-only {
	display: none !important;
}

.page[data-view-mode="monthly"] .daily-only {
	display: none !important;
}

.controls {
	display: flex;
	flex-wrap: wrap;
	gap: var(--gap-md);
	align-items: stretch;
	justify-content: flex-start;
}

.view-toggle {
	display: inline-flex;
	/* border: 1px solid var(--border-soft); */
	border-radius: var(--radius-xxl);
	background: var(--bg-card);
	box-shadow: var(--shadow-card);
	overflow: hidden;
}

.view-toggle-btn {
	border: none;
	background: transparent;
	padding: 10px 14px;
	font-weight: 600;
	color: var(--text-muted);
	cursor: pointer;
	transition: var(--transition-border);
}

.view-toggle-btn.active {
	background: var(--gradient-accent);
	color: #fff;
	box-shadow: var(--shadow-btn-airy);
}

.view-toggle-btn:focus-visible {
	outline: 2px solid var(--accent);
	outline-offset: 2px;
}

.day-info {
        display: flex;
        gap: var(--gap-md);
        align-items: stretch;
}

.day-select {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
	padding: var(--gap-sm) 14px;
	border-radius: var(--radius-md);
	border: 1px solid var(--border-soft);
	background: var(--bg-card);
	min-width: 162px;
	box-shadow: var(--shadow-card);
	min-height: var(--control-height);
}

.day-select label {
	font-size: var(--font-size-caption);
	color: var(--text-muted);
}

.day-select-control {
	position: relative;
	flex: 1;
	min-width: 146px;
}

.day-select-control input[type="date"] {
	width: 100%;
	font-family: var(--font-sans);
	font-size: var(--font-size-body);
	font-weight: 600;
	appearance: none;
	padding-right: 32px;
	border: none;
	background: transparent;
	color: var(--text-main);
	outline: none;
	position: relative;
}

.day-select-control::after {
	content: "";
	position: absolute;
	top: 50%;
	right: 8px;
	transform: translateY(-50%);
	width: 20px;
	height: 20px;
	background: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='4' width='14' height='13' rx='2' stroke='%236B77F4' stroke-width='1.5'/%3E%3Cpath d='M7 2.5V6' stroke='%236B77F4' stroke-width='1.5' stroke-linecap='round'/%3E%3Cpath d='M13 2.5V6' stroke='%236B77F4' stroke-width='1.5' stroke-linecap='round'/%3E%3Cpath d='M3 8.5H17' stroke='%236B77F4' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E") center/contain no-repeat;
	opacity: 0.8;
	pointer-events: none;
}

.day-select-control input[type="date"]::-webkit-calendar-picker-indicator {
	cursor: pointer;
	color: transparent;
	background: transparent;
	opacity: 0;
	position: absolute;
	inset: 0;
	width: 100%;
	height: 100%;
}

.day-select-control input[type="date"]:disabled {
	color: var(--text-muted);
}

.contract-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        box-shadow: var(--shadow-card);
        padding: clamp(14px, 2vw, var(--gap-lg));
        display: grid;
        gap: var(--gap-md);
        margin-bottom: var(--section-gap);
        min-height: var(--control-height);
}

.contract-card-header {
	display: flex;
	flex-direction: column;
	gap: var(--gap-sm);
}

.contract-card-title {
	font-weight: 700;
	font-size: var(--font-size-h3);
	display: flex;
	align-items: baseline;
	flex-wrap: wrap;
	gap: 6px;
}

.contract-card-title-date {
	display: inline;
	font-weight: inherit;
	font-size: inherit;
	color: inherit;
}

.contract-card-values {
	display: flex;
	gap: var(--gap-sm);
	font-size: var(--font-size-body-sm);
	flex-wrap: nowrap;
}

.contract-card-values > div {
	flex: 1 1 0;
	min-width: 0;
}

.contract-card-values .label {
	font-size: 0.75rem;
	letter-spacing: 0.06em;
	text-transform: uppercase;
	color: var(--text-muted);
	display: block;
	margin-bottom: 2px;
}

.contract-progress-bar {
	width: 100%;
	height: var(--gap-lg);
	background: var(--bg-muted);
	border: 1px solid var(--border-soft);
	border-radius: var(--radius-xxl);
	overflow: hidden;
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
	position: relative;
}

.contract-progress-fill {
	height: 100%;
	width: 0;
	background: var(--accent);
	transition: width 0.35s ease, background-color 0.2s ease;
	border-radius: var(--radius-xxl);
	box-shadow: var(--shadow-card);
}

.contract-progress-fill.overflow {
	background: var(--success);
}

@media (min-width: 768px) {
	.contract-card-header {
		flex-direction: row;
		align-items: center;
		justify-content: space-between;
	}

	.contract-card-values {
		gap: clamp(12px, 2vw, 18px);
	}
}

.pdf-action {
	display: flex;
	align-items: center;
}

.pdf-action-mobile {
	display: none;
}

.month-info {
        display: flex;
        align-items: center;
        gap: var(--gap-md);
        flex-wrap: nowrap;
}

.month-select {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
	padding: var(--gap-sm) 14px;
	background: var(--bg-card);
	border-radius: var(--radius-md);
	border: 1px solid var(--border-soft);
	box-shadow: var(--shadow-card);
	min-height: var(--control-height);
	position: relative;
}

.month-select label {
	font-size: var(--font-size-caption);
	color: var(--text-muted);
}

.month-select-control {
	position: relative;
	flex: 1;
	min-width: 146px;
}

.month-select-control select {
	width: 100%;
	appearance: none;
	padding-right: 26px;
}

.month-select-control::after {
	content: "";
	position: absolute;
	top: 50%;
	right: 8px;
	width: 8px;
	height: 8px;
	border-right: 2px solid var(--chevron-color);
	border-bottom: 2px solid var(--chevron-color);
	transform: translateY(-50%) rotate(45deg);
	pointer-events: none;
	opacity: 1;
}

select,
input[type="date"] {
	border: none;
	background: transparent;
	font-size: var(--font-size-body);
	color: var(--text-main);
	outline: none;
	font-weight: 600;
}

.pill {
	font-size: var(--font-size-caption);
	padding: var(--gap-sm) 14px;
	border-radius: var(--radius-md);
	border: 1px solid var(--border-soft);
	background: var(--bg-muted);
	color: var(--text-main);
	display: inline-flex;
	align-items: center;
	gap: var(--gap-sm);
	min-height: var(--control-height);
}

/* Зелёный индикатор обновления данных с "эхом" (светлый ореол) */
.pill-dot {
	width: 14px;
	height: 14px;
	border-radius: var(--radius-xxl);
	background: var(--success);
	position: relative;
	flex: 0 0 auto;
	box-shadow: 0 2px 6px rgba(15,157,88,0.18);
}

.pill-dot::after {
	content: "";
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	width: var(--control-height-sm);
	height: var(--control-height-sm);
	border-radius: var(--radius-xxl);
	background: rgba(15,157,88,0.08);
	filter: blur(6px);
	pointer-events: none;
	z-index: -1;
}

.pill-info {
	display: flex;
	flex-direction: column;
	line-height: 1.15;
	width: 100%;
	align-items: center;
	text-align: center;
}

.pill-label,
.pill-value {
	display: block;
	width: 100%;
	text-align: center;
}

.pill-label {
	font-size: var(--font-size-tiny);
	letter-spacing: 0.08em;
	text-transform: uppercase;
	color: var(--text-muted);
}

.pill-value {
	font-weight: 600;
	color: var(--text-main);
	word-break: break-word;
}

/* --- Header layout refinements --- */
.page-header {
	display: flex;
	flex-direction: column;
	gap: var(--gap-lg);
	margin-bottom: var(--grid-gap);
	padding: clamp(var(--gap-md), 2vw, var(--gap-lg)) 0;
}

.page-header-left {
	display: flex;
	flex-direction: column;
	gap: 14px;
}

.page-header-right {
	display: flex;
	flex-direction: column;
	gap: var(--gap-md);
	align-items: stretch;
}

.header-actions {
	display: flex;
	align-items: center;
}

.view-switch {
	display: inline-flex;
	gap: var(--gap-xs);
	background: var(--bg-card);
	/* border: 1px solid var(--border-soft); */
	border-radius: var(--radius-md);
	padding: var(--gap-xs);
	box-shadow: var(--shadow-card);
	width: fit-content;
	min-height: var(--control-height);
}

.view-tab {
	background: transparent;
	border: none;
	padding: var(--gap-xs) var(--gap-md);
	font-size: var(--font-size-label);
	font-weight: 600;
	letter-spacing: 0.02em;
	border-radius: var(--radius-sm);
	cursor: pointer;
	color: var(--text-muted);
	position: relative;
	transition: background 0.15s ease, color 0.15s ease, box-shadow 0.2s ease;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	line-height: 1.1;
	min-width: 64px;
}

.view-tab-line1,
.view-tab-line2 {
	display: block;
	white-space: nowrap;
}

.view-tab-line1 {
	font-size: var(--font-size-label);
}

.view-tab-line2 {
	font-size: var(--font-size-caption);
}

.view-tab:hover:not(.is-active) {
	background: var(--bg-muted);
	color: var(--text-main);
}

.view-tab.is-active {
	background: var(--accent);
	color: #fff;
	box-shadow: var(--shadow-btn-primary);
}

.view-tab:focus-visible {
	outline: 2px solid var(--accent);
	outline-offset: 2px;
}

@media (min-width: 880px) {
	.page-header {
		flex-direction: row;
		justify-content: space-between;
		align-items: flex-end;
	}
	.page-header-right {
		flex-direction: row;
		align-items: stretch;
		gap: 18px;
	}
	.header-actions {
		align-items: stretch;
	}
	.page-header-left {
		flex: 1 1 auto;
	}
}

@media (max-width: 879px) {
	.view-switch {
		width: 100%;
		min-height: 54px;
	}
	.view-tab {
		flex: 1 1 0;
		text-align: center;
		padding: 10px 8px;
		min-width: 0;
		flex-direction: row;
		gap: 4px;
	}
	.view-tab-line1,
	.view-tab-line2 {
		font-size: 0.78rem;
		display: inline;
	}
}

/* Compact variant */
.page-header.compact {
	gap: 12px;
	padding: 6px 0 12px;
}
.page-header.compact .title-block { gap: 4px; }
.page-header.compact .subtitle { font-size: 0.84rem; }
.page-header.compact .view-switch {
	padding: 4px;
	min-height: 54px;
}
.page-header.compact .view-tab {
	padding: 4px 10px;
	font-size: 0.75rem;
	min-width: 62px;
}
.page-header.compact .month-select,
.page-header.compact .day-select,
.page-header.compact .pill,
.page-header.compact .pdf-action-desktop .btn-airy { min-height: 54px; }
.page-header.compact .month-select,
.page-header.compact .day-select { padding: 6px 12px; }
.page-header.compact .pill { padding: 6px 12px; }
.page-header.compact .pdf-action-desktop .btn-airy.btn-pdf-compact { padding: 0 12px; }
.btn-airy.btn-pdf-compact span { font-size: 0.85rem; letter-spacing: 0.04em; font-weight: 700; }
.btn-airy.btn-pdf-compact { gap: 6px; }
@media (min-width: 880px) {
	.page-header.compact .page-header-right { gap: 14px; }
	.page-header.compact .controls { gap: 14px; }
}
@media (max-width: 879px) {
	.page-header.compact .month-select label { font-size: 0.7rem; }
	.page-header.compact .view-tab { flex: 1 1 0; }
}

/* Мобильное: месяц и pill в одну строку */
@media (max-width: 767px) {
	.page-header.compact .month-info { flex-wrap: nowrap; width: 100%; }
	.page-header.compact .month-info .month-select,
	.page-header.compact .day-info .day-select { flex: 1 1 auto; min-width: 0; }
	.page-header.compact .month-info .pill,
	.page-header.compact .day-info .pill { flex: 1 1 auto; min-width: 0; }
	.page-header.compact .month-info .month-select,
	.page-header.compact .day-info .day-select,
	.page-header.compact .month-info .pill,
	.page-header.compact .day-info .pill { padding: 6px 10px; }
	.page-header.compact .month-info,
	.page-header.compact .day-info { gap: 8px; }
	.pdf-action-mobile-bottom {
		margin: 28px auto 16px;
		max-width: 1180px;
		width: 100%;
		padding: 0 clamp(12px, 3vw, 28px);
		box-sizing: border-box;
	}
}

.delta-positive {
	color: var(--success);
}

.delta-negative {
	color: var(--danger);
}

.btn {
	display: inline-flex;
	align-items: center;
	gap: 10px;
	cursor: pointer;
	background: var(--accent);
	color: #fff;
	box-shadow: var(--shadow-btn-primary);
	white-space: nowrap;
	font-weight: 600;
	letter-spacing: 0.02em;
}

.btn svg {
	width: 16px;
	height: 16px;
	stroke: currentColor;
	stroke-width: 1.6;
}

.btn:disabled {
	opacity: 0.6;
	cursor: not-allowed;
	box-shadow: none;
}

.btn-outline {
	background: #f4f6ff;
	color: var(--accent-strong);
	border: 1px solid var(--accent-soft);
	box-shadow: none;
}

.btn-airy {
	background: var(--gradient-btn-airy);
	color: var(--accent-strong);
	border: 1px solid rgba(47, 111, 237, 0.18);
	box-shadow: var(--shadow-btn-airy);
	padding: 0 16px;
	min-height: var(--control-height);
	display: inline-flex;
	align-items: center;
	gap: var(--gap-sm);
	font-weight: 600;
	border-radius: var(--radius-md);
	cursor: pointer;
}

.btn-airy:hover:not(:disabled) {
	box-shadow: var(--shadow-btn-airy-hover);
	transform: translateY(-1px);
	background: var(--gradient-btn-airy-hover);
}

.btn-airy:active:not(:disabled) {
	transform: translateY(0);
	box-shadow: var(--shadow-btn-airy-active);
}

@media (min-width: 768px) {
	.pdf-action-desktop .btn-airy {
		background: var(--gradient-btn-airy-desktop);
		color: var(--text-main);
		border: 1px solid var(--border-soft);
		box-shadow: var(--shadow-btn-airy-desktop);
		min-height: var(--control-height);
		padding: 0 var(--gap-lg);
	}

	.pdf-action-desktop .btn-airy:hover:not(:disabled) {
		background: var(--gradient-btn-airy-desktop-hover);
		box-shadow: var(--shadow-btn-airy-desktop-hover);
		transform: translateY(-1px);
	}

	.pdf-action-desktop .btn-airy:active:not(:disabled) {
		transform: translateY(0);
		box-shadow: var(--shadow-btn-airy-desktop-active);
	}
}

.btn:active {
	transform: translateY(1px);
	box-shadow: var(--shadow-btn-primary-active);
}

@media (max-width: 767px) {
	.controls {
		flex-direction: column;
		align-items: stretch;
	}

	.pdf-action {
		width: 100%;
	}

	.pdf-action-desktop {
		display: none;
	}

	.pdf-action-mobile {
		display: flex;
		margin-top: 8px;
	}

	.pdf-action .btn {
		width: 100%;
		justify-content: center;
	}

	.month-info {
		width: 100%;
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 6px;
		align-items: stretch;
	}

	.day-info {
		width: 100%;
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 6px;
		align-items: stretch;
	}

	.month-select,
	.pill {
		width: 100%;
		height: 100%;
	}

	.day-select {
		width: 100%;
		height: 100%;
		flex-direction: column;
		align-items: flex-start;
		gap: 4px;
	}

	.month-select {
		flex-direction: column;
		align-items: flex-start;
		gap: 4px;
	}

	.month-select label {
		width: 100%;
		text-align: left;
	}

	.month-select-control {
		width: 100%;
	}

	.month-select-control select {
		width: 100%;
		cursor: pointer;
		text-align: left;
		text-align-last: left;
	}

	.day-select label {
		width: 100%;
		text-align: left;
	}

	.day-select-control {
		width: 100%;
	}

	.day-select-control input[type="date"] {
		width: 100%;
		cursor: pointer;
		text-align: left;
	}

	.pill {
		justify-content: flex-start;
	}

	.pill-info {
		align-items: flex-start;
		text-align: left;
		width: 100%;
	}

	.pill-value {
		white-space: nowrap;
		font-size: clamp(0.78rem, 3.6vw, 0.9rem);
	}
}

