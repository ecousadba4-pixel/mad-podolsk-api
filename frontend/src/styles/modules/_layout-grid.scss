/* Layout grid, containers and panel primitives extracted from layout.css */

/* Toasts (global) */
.toast {
  /* moved from `_overrides.scss` — keep toast offsets token-driven */
  position: fixed;
  bottom: var(--fab-offset);
  right: var(--fab-offset);
  background: var(--bg-card);
  padding: var(--card-padding) var(--gap-xl);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-soft);
  animation: slide-in 0.3s ease;
  z-index: 1000;
}

@media (prefers-reduced-motion: reduce) {
  .toast { animation: none; }
}
.toast.success { border-left: 4px solid var(--success); }
.toast.error   { border-left: 4px solid var(--danger); }

/* Panel primitive: generic surface for sections and panels used across views
   Panels are layout primitives and belong to the layout module so they
   consistently inherit tokens for background, border and shadow. */
.panel {
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  box-shadow: var(--shadow-soft);
  border-radius: var(--radius-lg);
  padding: var(--card-padding);
  box-sizing: border-box;
}

/* Unified panel title styles for dashboard blocks (contract execution, smeta cards, smeta details)
   Apply within the dashboard scope so other panels keep their defaults. */
.dashboard .panel-title,
.dashboard .panel-title-mobile-value {
  /* Используем DIN-стиль заголовков (при наличии — подставить реальный DIN через @font-face). */
  font-family: var(--font-din);
  font-size: var(--font-size-h3);
  font-weight: 700;
  color: var(--text-main);
  margin: 0 0 calc(var(--gap-sm));
  line-height: 1.12;
  /* чуть более компактный трекин, характерный для DIN */
  letter-spacing: -0.02em;
  text-transform: none;
}

/* Ensure all dashboard panel title groups align to a common left axis
   This makes titles start at the same horizontal position across different
   panels/cards regardless of internal controls or variations in header layout. */
.dashboard .panel-title-group {
  padding-left: var(--card-inner-gap);
}

/* Add consistent vertical gap between panel header/title and panel content
   Use card-inner-gap so the spacing matches internal card padding. */
.panel > .panel-header { margin-top: var(--card-inner-gap); margin-bottom: var(--card-inner-gap); }
.panel .panel-header h3.panel-title,
.panel h3.panel-title { margin-bottom: calc(var(--card-inner-gap) / 2); }

/* Slightly smaller title for compact card headers (smeta cards) */
.dashboard .smeta-card header h3,
.dashboard .panel-title-group > h3.panel-title {
  font-size: clamp(1.05rem, 1.6vw, var(--font-size-h3));
}

/* Remove visual separator line that may appear between panel header and body
   Some templates insert small borders or hr elements; normalize by removing
   top/bottom borders between header and body to keep panels visually clean. */
.panel .panel-header { border-bottom: none; }
.panel hr { display: none; }
.panel > .panel-header + * { border-top: none; }
.contract-execution__body { border-top: none; }

/* Smeta panel (specific tweaks used in dashboard views) */
.smeta-panel {
  /* keep default panel appearance but allow smeta-specific padding rules
     to be overridden in `components.css` where layout interactions exist */
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  box-shadow: var(--shadow-card);
  border-radius: var(--radius-lg);
}

/* Contract card + progress bar */
.contract-card {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-soft);
  box-shadow: var(--shadow-card);
  padding: var(--card-padding);
  display: grid;
  gap: var(--gap-md);
  margin-bottom: 0; /* delegate vertical spacing to container gap */
  min-height: var(--control-height);
}

/* Dashboard grid should control spacing between top-level panels/cards */
.dashboard__grid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--card-frame-gap);
  align-items: flex-start;
}

.contract-card-header { display:flex; flex-direction:column; gap:var(--contract-meta-gap); }
.contract-card-title { font-weight:700; font-size:var(--font-size-h3); display:flex; align-items:baseline; gap:var(--gap-xs); }
.contract-card-values { display:flex; gap:var(--gap-sm); font-size:var(--font-size-numeric); flex-wrap:nowrap }
.contract-card-values > div { flex:1 1 0; min-width:0 }
.contract-card-values .label { font-size:0.75rem; letter-spacing:0.06em; text-transform:uppercase; color:var(--text-muted); display:block; margin-bottom:2px }

.contract-progress { padding-inline: var(--card-inner-gap); box-sizing: border-box; }
.contract-progress-bar {
  width:100%;
  height: var(--progress-height);
  background: var(--bg-muted);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-xxl);
  overflow:hidden;
  position:relative;
  box-shadow: inset 0 1px 0 rgb(255 255 255 / 50%);
}
.contract-progress-fill { height:100%; width:var(--progress,0%); background:var(--accent); transition: width 0.35s ease, background-color 0.2s ease; border-radius:var(--radius-xxl); box-shadow:var(--shadow-card); }
.contract-progress-fill.overflow { background: var(--success); }

@media (max-width: 640px) {
  /* Mobile: contract execution labels/values adapt to stacked layout */
  .contract-execution .panel-meta { display: flex; flex-direction: column; gap: calc(var(--gap-xs) * 0.6); }
  .contract-execution .panel-meta-row { display: flex; gap: var(--gap-md); align-items: center }
  .contract-execution .panel-meta-item { flex: 1 1 0; min-width: 0 }
  .contract-execution .panel-meta-label { text-align: left }
  .contract-execution .panel-meta-values .panel-meta-value { text-align: left }
}

/* Contract execution layout and meta (migrated from components.css) */
.contract-execution { box-sizing: border-box; }

.contract-execution .panel-meta-label {
  font-size: var(--font-size-label);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.contract-execution .panel-meta-value {
  font-size: var(--font-size-numeric);
  font-weight: 600;
  color: var(--text-main);
  margin-top: var(--gap-sm);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1;
}

@media (min-width: 768px) {
  .contract-execution .panel-meta-value { font-size: var(--font-size-numeric); }
}

.contract-execution .panel-title {
  font-size: var(--font-size-h2);
  font-weight: 700; /* align weight with other dashboard panel titles */
  font-family: var(--font-din);
  line-height: 1.12;
  letter-spacing: -0.02em;
  color: var(--text-main);
}

/* Ensure any contract-card specific title variant uses the same DIN family */
.dashboard .contract-card-title {
  font-family: var(--font-din);
  font-weight: 700;
  letter-spacing: -0.02em;
  line-height: 1.12;
}

@media (min-width: 769px) {
  .contract-execution .panel-meta { display: block; }
  .contract-execution .panel-meta-row { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 48px; align-items: center; }
  .contract-execution .panel-meta-row.panel-meta-labels .panel-meta-item,
  .contract-execution .panel-meta-row.panel-meta-values .panel-meta-item { display: block; min-width: 0; justify-self: start; }
  .contract-execution .panel-meta-label, .contract-execution .panel-meta-value { text-align: left; justify-self: start; }
}

.contract-execution__body { padding-top: var(--gap-sm); }

/* Compact horizontal variant: reduce height and lay out meta horizontally */
.contract-execution--compact {
  padding: calc(var(--gap-sm) * 1.5) var(--card-padding);
}
.contract-execution--compact .panel-header {
  display: grid;
  grid-template-columns: 1fr minmax(220px, 360px);
  align-items: center;
  gap: var(--gap-md);
}
.contract-execution--compact .panel-title {
  font-size: calc(var(--font-size-h3));
  margin: 0;
}
.contract-execution--compact .panel-meta {
  display: block;
}
.contract-execution--compact .panel-meta-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 18px;
  align-items: center;
}
.contract-execution--compact .panel-meta-item { min-width: 0; }
.contract-execution--compact .panel-meta-label {
  display: block;
  font-size: var(--font-size-label);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}
.contract-execution--compact .panel-meta-value { margin-top: 4px; text-align: right; }

/* Make progress thinner */
.contract-execution--compact .contract-progress__bar { height: 10px; border-radius: 999px; overflow: hidden; }
.contract-execution--compact .contract-progress__fill { height: 100%; display: block; }

@media (max-width: 640px) {
  .contract-execution--compact .panel-header { grid-template-columns: 1fr; }
  .contract-execution--compact .panel-meta { justify-content: flex-start; }
  .contract-execution--compact .panel-meta-label { display:block; }
}

.contract-progress-labels { display:flex; align-items:center; justify-content:space-between; font-size:var(--font-size-label); color:var(--text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-bottom:var(--gap-xs); }
.contract-progress-labels strong { font-size: var(--font-size-caption); color: var(--text-main); }


@media (min-width: 768px) {
  .contract-card-header { flex-direction:row; align-items:center; justify-content:space-between }
  .contract-card-values { gap: clamp(12px, 2vw, 18px); }
}

/* Page header and view switch */
.page-header {
  display:flex; flex-direction:column; gap:var(--card-frame-gap); margin-bottom: var(--grid-gap);
  padding: clamp(var(--gap-md), 2vw, var(--card-frame-gap)) 0;
}
.page-header-left { display:flex; flex-direction:column; gap:var(--gap-md) }
.page-header-right { display:flex; flex-direction:column; gap:var(--gap-md); align-items:stretch }
.header-actions { display:flex; align-items:center }

.view-switch { display:inline-flex; gap:var(--gap-xs); background:var(--bg-card); border-radius:var(--radius-md); padding:var(--gap-xs); box-shadow:var(--shadow-card); width:fit-content; min-height:var(--control-height); }
.view-tab { background:transparent; border:none; padding:var(--gap-xs) var(--gap-md); font-size:var(--font-size-label); font-weight:600; letter-spacing:0.02em; border-radius:var(--radius-sm); cursor:pointer; color:var(--text-muted); display:flex; flex-direction:column; align-items:center; justify-content:center; min-width:64px }
.view-tab.is-active { background:var(--accent); color:var(--text-inverse); box-shadow:var(--shadow-btn-primary) }

@media (min-width: 880px) {
  .page-header { flex-direction:row; justify-content:space-between; align-items:flex-end }
  .page-header-right { flex-direction:row; gap:var(--gap-lg); align-items:stretch }
  .page-header-left { flex:1 1 auto }
}

@media (max-width: 879px) {
  .view-switch { width:100%; min-height:54px }
  .view-tab { flex:1 1 0; text-align:center }
}

/* Router shell transitions */
.router-shell { position:relative; width:100% }
.fade-slide-enter-active, .fade-slide-leave-active { transition: opacity .18s ease, transform .18s ease; will-change: opacity, transform }
.fade-slide-enter-from { opacity:0; transform: translateY(6px) }
.fade-slide-enter-to   { opacity:1; transform: translateY(0) }
.fade-slide-leave-from { opacity:1; transform: translateY(0) }
.fade-slide-leave-to   { opacity:0; transform: translateY(-6px) }
/* Page layout, containers and small layout utilities
   Extracted from `layout.css` to keep grid & container primitives separate.
*/

@keyframes slide-in {
  from {
    transform: translateX(var(--slide-translate));
    opacity: 0;
  }

  to {
    /* moved from `_overrides.scss` */
    transform: translateX(0);
    opacity: 1;
  }
}

.page {
  --page-hpad: clamp(12px, 3vw, 28px);
  display: block;
  box-sizing: border-box;
  width: 100%;
  max-width: var(--page-max-width);
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--page-hpad);
  padding-right: var(--page-hpad);
}

/* Inner content grid: keep previous `.page` flex/grid behaviour but scoped
   to `.page-content` so the page itself remains a centered container with
   side background on wide screens. */
.page-content {
  display: flex;
  flex-wrap: wrap;
  gap: var(--card-frame-gap);
  align-items: stretch;
  justify-content: flex-start;
}

/* Ensure top-level children of `.page` keep vertical spacing similar to previous `gap` behaviour */
.page > * { width: 100%; box-sizing: border-box; }
.page > * + * { margin-top: var(--card-frame-gap); }

/* Dashboard / smeta panel layout rules (migrated from components.css) */
.dashboard__grid > .contract-execution { flex: 1 1 100%; width: 100%; }

.dashboard__grid > .smeta-panel,
.smeta-panel {
  flex: 1 1 100%;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  margin-left: 0;
  margin-right: 0;
}

.smeta-panel { padding: calc(var(--card-padding) / 2) var(--card-padding) var(--card-padding) var(--card-padding); }

.dashboard__grid > .smeta-panel.smeta-details {
  flex: 1 1 100%;
  width: 100%;
  max-width: 100%;
  margin-left: 0;
  margin-right: 0;
}

@media (max-width: 640px) {
  .dashboard__grid > .smeta-panel,
  .smeta-panel {
    flex: 1 1 100%;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    margin-left: 0;
    margin-right: 0;
    padding-left: var(--card-padding);
    padding-right: var(--card-padding);
  }

  .smeta-card--large { width: 100%; }
}

/* Mockup / demo layout helpers (migrated from mockup.css) */
:root {
  /* demo background used by mockups; tokenized here so it's easy to remove later */
  --mockup-bg: linear-gradient(120deg, #f8fbff 0%, #f4f8ff 32%, #f9f9ff 100%);
}

.mockup-body {
  margin: 0;
  font-family: var(--font-sans);
  background: var(--mockup-bg);
  color: var(--text-main);
}

.mockup-page {
  max-width: 1280px;
  margin: 0 auto;
  padding: clamp(16px, 4vw, 42px) clamp(16px, 4vw, 48px) clamp(32px, 5vw, 64px);
  display: flex;
  flex-direction: column;
  gap: var(--card-frame-gap);
}

.mockup-top { display: flex; flex-direction: column; gap: var(--gap-sm); }

.mockup-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: var(--gap-sm);
  padding: var(--gap-sm) var(--gap-md);
  border-radius: var(--radius-xxl);
  border: 1px solid var(--border-soft);
  background: var(--surface-base);
  font-size: var(--font-size-caption);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--text-muted);
  width: fit-content;
  box-shadow: var(--shadow-soft);
}

.mockup-top h1 { font-size: clamp(1.6rem, 3vw, 2rem); margin: 0; }

.mockup-lead { margin: var(--gap-xs) 0 0; color: var(--text-muted); max-width: 960px; line-height: 1.6; }

.mockup-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: clamp(16px, 2vw, var(--card-frame-gap)); }

.panel-subtitle { color: var(--text-muted); margin-top: var(--gap-xs); }
.panel-note {
  display: block;
  color: var(--text-muted);
  margin-top: calc(var(--gap-xs) / 2);
  margin-bottom: calc(var(--gap-xs) / 2);
  font-size: var(--font-size-body-sm);
  line-height: 1.25;
  font-weight: 500;
}

.view-toggle {
  display: inline-flex;
  border-radius: var(--radius-xxl);
  background: var(--bg-card);
  box-shadow: var(--shadow-card);
  overflow: hidden;
}

.view-toggle-btn {
  border: none;
  background: transparent;
  padding: var(--gap-md) var(--card-frame-gap);
  font-weight: 600;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-border);
}

.view-toggle-btn.active {
  background: var(--gradient-accent);
  color: var(--text-inverse);
  box-shadow: var(--shadow-btn-airy);
}

.view-toggle-btn:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
