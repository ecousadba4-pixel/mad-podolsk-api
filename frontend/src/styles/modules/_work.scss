@layer components {
/* Work list and daily table styles (migrated from work.css) */

.work-panel-header { align-items: stretch; }

.work-panel-title-area { display:flex; flex-direction:column; gap:var(--gap-sm); flex:1; min-width:260px; }

.work-sort-select { display:flex; flex-direction:column; gap:var(--gap-xs); padding:6.8px var(--gap-md); border-radius:var(--radius-md); border:1px solid var(--border-soft); background:var(--bg-card); min-width:126px; box-shadow:var(--shadow-card); }
.work-sort-select-label { font-size: var(--font-size-tiny); letter-spacing:0.08em; text-transform:uppercase; color:var(--text-muted); }
.work-sort-select-control { position: relative; width:100%; }
.work-sort-select-control select { width:100%; font-size:var(--font-size-body); font-weight:600; appearance:none; padding-right: var(--gap-xl); }
.work-sort-select-control::after { content:""; position:absolute; top:50%; right:6px; width:8px; height:8px; border-right:2px solid var(--text-muted); border-bottom:2px solid var(--text-muted); transform:translateY(-50%) rotate(45deg); pointer-events:none; opacity:0.6; }

@media (min-width: 768px) { .work-panel-header .work-sort-select { display: none; } }

.work-detail-hint { color: var(--text-muted); line-height:1.4; margin:0; width:100%; flex-basis:100%; }
.work-detail-hint-line-break { display:none; }

.work-list { display:flex; flex-direction:column; gap:0; margin-top: var(--grid-gap); }
.work-list-panel { padding: var(--card-padding); }
.work-list-header { margin-bottom: var(--gap-sm); }

.work-row-name-link { cursor:pointer; color:var(--text-main); text-decoration:none; font-weight:500; }
.work-row-name-link:hover { color:var(--text-main); text-decoration:none; }

.work-list-scroller { width:100%; }

.work-list-surface, .work-list.has-data { border:1px solid var(--border-soft); border-radius:20px; overflow:hidden; background: rgb(255 255 255 / 95%); box-shadow: var(--shadow-soft); }

@media (min-width: 768px) {
  .work-list.has-data .work-list-scroller .work-row:nth-child(odd) { background: var(--bg-card); }
  .work-list.has-data .work-list-scroller .work-row:nth-child(even) { background: linear-gradient(90deg, rgb(47 111 237 / 3%) 0%, rgb(47 111 237 / 5%) 100%); }
}

.work-row { display:grid; grid-template-columns: minmax(0, 4fr) repeat(3, minmax(0, 0.7fr)); gap:var(--gap-sm); padding: var(--gap-md) var(--gap-lg); border-bottom:1px solid var(--border-soft); align-items:center; font-size:var(--font-size-body-sm); background:var(--bg-card); font-variant-numeric:tabular-nums; contain:layout style paint; }

.work-list-table .work-row:not(.work-row-header):nth-of-type(odd) { background: var(--bg-card); }
.work-list-table .work-row:not(.work-row-header):nth-of-type(even) { background: linear-gradient(90deg, rgb(47 111 237 / 2%) 0%, rgb(47 111 237 / 4%) 100%); }

.work-row-last { border-bottom: 1px solid var(--border-soft); }

.work-row-header { background: var(--accent-soft); font-size: var(--font-size-label); font-weight:600; letter-spacing:0.08em; text-transform:uppercase; color: var(--text-muted); }
.work-row-header div:first-child { text-align:left; }
.work-row-header div { text-align:right; }

.work-sort-button { border:none; background:none; color:inherit; font:inherit; letter-spacing:inherit; text-transform:inherit; display:inline-flex; align-items:center; justify-content:flex-end; gap:var(--gap-sm); cursor:pointer; padding: var(--gap-xs) var(--gap-sm); border-radius:var(--radius-xxl); transition: background-color 0.2s ease, color 0.2s ease; }
.work-sort-button .sort-indicator { width:0; height:0; border-left:5px solid transparent; border-right:5px solid transparent; border-top:7px solid currentcolor; opacity:0.4; transform-origin:center; transition: opacity 0.2s ease; }
.work-sort-button .sort-indicator.desc { transform: rotate(180deg); }
.work-sort-button.active { color: var(--accent-strong); background-color: rgb(47 111 237 / 10%); }
.work-sort-button.active .sort-indicator { opacity: 1; }
.work-sort-button:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.work-row-name { font-size: var(--font-size-body); font-weight:400; color:var(--text-main); display:flex; flex-direction:column; gap:var(--gap-sm); position:relative; }
.work-row-name-text { display:block; line-height:1.4; padding-right:28px; }
.work-row-name--collapsed .work-row-name-text { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }

.work-row-name-toggle { border:none; background:none; padding:0; display:none; align-items:center; justify-content:center; width:28px; height:28px; border-radius:var(--radius-xxl); color:var(--chevron-color); cursor:pointer; position:absolute; top:0; right:0; }
.work-row-name-toggle:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-radius:4px; }
.work-row-name-toggle-icon { width:8px; height:8px; border-right:2px solid var(--chevron-color); border-bottom:2px solid var(--chevron-color); transform: rotate(45deg); transition: transform 0.2s ease; opacity:1; }
.work-row-name-toggle[aria-expanded="true"] .work-row-name-toggle-icon { transform: rotate(-135deg); }

.work-row-money { text-align:right; font-weight:600; }
.work-row-money span:last-child, .work-row-delta-value { white-space: nowrap; }

.work-row-label { display:none; font-size: var(--font-size-label); text-transform:uppercase; letter-spacing:0.05em; color:var(--text-muted); }

.work-row-delta { display:flex; flex-direction:column; align-items:flex-end; gap:2px; text-align:right; }
.work-row-delta.delta-negative { color: var(--danger); }

.status-bar { margin-top:16px; font-size:var(--font-size-caption); color:var(--text-muted); display:flex; justify-content:space-between; gap:var(--gap-sm); flex-wrap:wrap; align-items:center; border-top:1px solid var(--border-soft); padding-top:var(--gap-md); }

.empty-state { padding:46px 20px; text-align:center; color:var(--text-muted); font-size:var(--font-size-body); border:1px dashed var(--border-soft); border-radius:var(--radius-lg); background:var(--bg-muted); }


.work-list-mobile-header { display:none; }
.panel-title-desktop { display:block; }
.panel-title-mobile { display: none; }

/* Hide header controls (mobile sort) by default for smeta details panels on desktop
  and only show them on small screens where inline column sorting isn't convenient. */
.smeta-panel.smeta-details .panel-header-controls { display: none; }
.work-mobile-sort { display:none; }

.work-mobile-sort-label { font-size:var(--font-size-label); letter-spacing:0.08em; text-transform:uppercase; color:var(--text-muted); margin-bottom:6px; }
.work-mobile-sort-control { position:relative; }
.work-mobile-sort-control select { width:100%; padding:var(--gap-md) var(--gap-xl) var(--gap-md) var(--card-inner-gap); border-radius:var(--radius-lg); border:1px solid var(--border-soft); background:var(--surface-base); font-weight:600; font-size:var(--font-size-body); appearance:none; color:var(--text-main); box-shadow:var(--shadow-soft); }
.work-mobile-sort-arrow { position:absolute; top:50%; right:12px; width:10px; height:10px; border-right:2px solid var(--text-muted); border-bottom:2px solid var(--text-muted); transform:translateY(-50%) rotate(45deg); pointer-events:none; opacity:0.6; }

/* daily-table specific styles moved to `_daily-table.scss` */

@media (max-width: 768px) {
  .work-list-header { display:none; }
  /* hide desktop H2 for smeta panels and show mobile title block */
  .smeta-panel.smeta-details .panel-title { display: none; }
  .smeta-panel.smeta-details .panel-title-mobile { display: flex; }
  /* show mobile sort controls inside panel header on small screens */
  .smeta-panel.smeta-details .panel-header-controls { display: flex !important; align-items: center; margin-left: 8px; }
  .panel-title-desktop { display:none; }
  .work-list-mobile-header { display:grid; grid-template-columns: minmax(0, 1fr) minmax(140px, 40vw); align-items:flex-start; gap: var(--gap-sm) clamp(12px, 4vw, 20px); padding: var(--card-frame-gap) var(--gap-md) var(--gap-xs); }
  .work-list-mobile-title { display:flex; flex-direction:column; gap:var(--gap-xs); flex:1; min-width:0; }
  .work-list-mobile-title-label { font-size:var(--font-size-label); text-transform:uppercase; letter-spacing:0.05em; color:var(--text-muted); }
  .work-list-mobile-title-value { font-size:var(--font-size-h3); font-weight:600; color:var(--text-primary); line-height:1.25; word-break:break-word; }
  .work-mobile-sort { display:flex; flex-direction:column; width:100%; flex-shrink:0; }
  .work-row-skeleton { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .work-panel-header { display:grid; grid-template-columns: minmax(0,1fr) max-content; grid-template-areas: "title sort" "hint hint"; gap: clamp(12px,3vw,18px) clamp(16px,4vw,24px); align-items:center; margin-bottom: var(--gap-sm); }
  .work-panel-title-area { grid-area: title; align-items:flex-start; min-width:0; }
  .panel-title-text-desktop { display:none; }
  /* Мобильная шапка блока расшифровки смет — заголовок и подзаголовок в колонку */
  .panel-title-mobile { 
    display: flex; 
    flex-direction: column; 
    gap: 4px; 
    min-width: 0; 
    width: 100%; 
  }
  .panel-title-mobile-main { 
    font-family: var(--font-din);
    font-size: var(--font-size-h3); 
    line-height: 1.12; 
    font-weight: 700; 
    color: var(--text-main); 
    margin: 0;
    letter-spacing: -0.02em;
  }
  .panel-note-mobile { 
    font-size: var(--font-size-sm, 0.875rem); 
    color: var(--text-muted); 
    margin: 0;
  }
  .panel-title-mobile-value { font-size: clamp(1rem, 4vw, 1.2rem); line-height:1.2; }
  .work-panel-header .panel-title-group { grid-area: title; min-height:0; min-width:0; max-width:100%; place-self:center start; align-items:center; }
  .work-panel-header .panel-title { font-size:var(--font-size-body); line-height:1.3; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; text-overflow:ellipsis; max-width:100%; }
  .work-detail-hint { grid-area: hint; font-size:var(--font-size-caption); margin:2px 0 0; width:100%; place-self:center center; text-align:center; }
  .work-detail-hint-line-break { display:none; }
  .work-panel-header .work-sort-select { grid-area: sort; justify-self:end; width: min(42vw, 186px); }
  .work-sort-select { min-width:0; }
  .work-row-header { display:none; }
  .work-row { grid-template-columns: repeat(3, minmax(0, 1fr)); align-items:center; }
  .work-row-name { grid-column: 1 / -1; }
  .work-row-money, .work-row-delta { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:var(--gap-sm); text-align:center; }
  .work-row-label { display:block; width:100%; text-align:center; }
  /* daily-table specific styles moved to `_daily-table.scss` */

  /* Reduce vertical gap between panel header and body for smeta details on mobile
     Override the default `.panel > .panel-header` spacing which is applied globally
     in `_layout-grid.scss`. Make it tighter to match the mobile design. */
  .smeta-panel.smeta-details > .panel-header { margin-top: 6px; margin-bottom: 6px; }

    /* Ensure header controls sit above mobile items (which may expand)
      so the select remains clickable. Also reset mobile items z-index. */
    .smeta-panel.smeta-details > .panel-header { position: relative; z-index: 30; }
    .smeta-details-mobile .smeta-mobile-item { position: relative; z-index: 0; }
    .smeta-panel.smeta-details .panel-header-controls { z-index: 40; pointer-events: auto; }
}
}
