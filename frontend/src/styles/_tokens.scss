/* Tokens — единый источник правды для CSS custom properties.
  Содержит CSS custom properties, используемые как исходная база.
*/
@layer tokens {
:root {
  --font-sans: "Manrope", system-ui, -apple-system, blinkmacsystemfont, "Segoe UI", sans-serif;

  /* Основной семейство для заголовков и специальных DIN-подобных мест. */
  --font-din: "Manrope", "Archivo Narrow", "DINNext", "DIN", "DIN 2014", "Roboto", system-ui, -apple-system, "Segoe UI", sans-serif;

  /* Surfaces */
  --surface-base: #fff;
  --surface-overlay: #ffffffd9;
  --surface-highlight: #f4f6ff;
  --surface-contrast: #0f172a;
  --bg: #f1f4fa;
  --bg-card: #fff;
  --bg-muted: #f7f8fc;
  --border-soft: #d8deec;
  --border-neutral: #d0d0d0;
  --border-faint: rgb(15 23 42 / 4%);
  --border-strong: #b8c1d8;
  --text-main: #0f172a;
  --text-inverse: #fff;
  --text-label-strong: #444;
  --text-subtle: #555;
  --text-muted: #5e6473;
  --text-soft: #777;
  --text-faint: #888;
  --accent: #2f6fed;
  --brand-accent: #2f6fed;
  --accent-strong: #1e4fd8;
  --accent-soft: #e0e7ff;
  --danger: #c0342b;
  --success: #0f9d58;
  --chevron-color: rgb(94 100 115 / 50%);

  /* Typography scale */
  --font-size-h1: 1.75rem;
  --font-size-h2: 1.2rem;
  --font-size-h3: 1.05rem;
  /* Unified numeric size used for key numeric values in cards and KPIs */
  --font-size-numeric: var(--font-size-h2);
  --font-size-body: 0.95rem;
  --font-size-body-sm: 0.88rem;
  --font-size-caption: 0.78rem;
  --font-size-label: 0.72rem;
  --font-size-tiny: 0.64rem;

  /* Border radius scale */
  --radius-xl: 22px;
  --radius-lg: 18px;
  --radius-md: 12px;
  --radius-sm: 8px;
  --radius-xxl: 999px;

  /* Unified spacing between card frames — harmonized for symmetric gutters */
  --card-frame-gap-mobile: 16px;
  --card-frame-gap-desktop: 24px;
  --card-frame-gap: var(--card-frame-gap-mobile);
  --section-gap: var(--card-frame-gap);

  /* Unified inner gap between card border and internal labels/pills */
  --card-inner-gap-mobile: 14px;
  --card-inner-gap-desktop: 20px;
  --card-inner-gap: var(--card-inner-gap-mobile);

  /* value indent inside card (usually a bit larger) */
  --card-inner-indent: calc(var(--card-inner-gap) * 2);

  /* Gap scale */
  --gap-xs: 4px;
  --gap-sm: 8px;
  --gap-md: 12px;
  --gap-lg: 18px;
  --gap-xl: 24px;

  /* Standard height for progress bars used across the app */
  --progress-height: 8px;

  /* Control size tokens (used by header controls, pills, buttons) */
  --control-height: 56px;
  --control-height-sm: 36px;
  --control-height-mobile: 32px;

  /* Shadows, gradients, transitions */
  --shadow-btn-airy-hover: 0 12px 32px rgb(47 111 237 / 16%);
  --shadow-btn-airy-active: 0 8px 22px rgb(47 111 237 / 14%);
  --shadow-btn-airy-desktop: 0 6px 16px rgb(15 23 42 / 8%);
  --shadow-btn-airy-desktop-hover: 0 8px 18px rgb(15 23 42 / 10%);
  --shadow-btn-airy-desktop-active: 0 4px 12px rgb(15 23 42 / 8%);
  --shadow-btn-primary: 0 10px 20px rgb(47 111 237 / 18%);
  --shadow-btn-primary-active: 0 6px 12px rgb(47 111 237 / 16%);
  --shadow-card: 0 12px 26px rgb(15 23 42 / 8%);
  --shadow-soft: 0 8px 20px rgb(15 23 42 / 6%);
  --shadow-strong: 0 14px 32px rgb(15 23 42 / 12%);
  --shadow-category-active: 0 18px 28px rgb(47 111 237 / 15%);
  --shadow-category-indicator: 0 6px 16px rgb(47 111 237 / 35%);
  --shadow-summary-hover: 0 10px 24px rgb(37 99 235 / 12%);
  --gradient-page: linear-gradient(180deg, #f6f8fd 0%, #eef2fb 60%, #edf1fb 100%);
  --gradient-skeleton: linear-gradient(90deg, var(--bg-muted) 25%, var(--bg-card) 50%, var(--bg-muted) 75%);
  --gradient-accent: linear-gradient(180deg, var(--accent), var(--accent-strong));
  --gradient-btn-airy: linear-gradient(180deg, #fff 0%, #f7f9ff 100%);
  --gradient-btn-airy-hover: linear-gradient(180deg, #fff 0%, #eef3ff 100%);
  --gradient-btn-airy-desktop: linear-gradient(180deg, #fff 0%, #f5f6fb 100%);
  --gradient-btn-airy-desktop-hover: linear-gradient(180deg, #fff 0%, #f1f4fa 100%);
  --transition-lift: transform 0.15s ease, box-shadow 0.2s ease;
  --transition-fade: opacity 0.2s ease;
  --transition-border: border-color 0.2s ease, background-color 0.2s ease;
  --grid-gap: var(--card-frame-gap);
  --card-padding: clamp(14px, 1.8vw, 20px);

  /* Page layout tokens */
  --page-max-width: 1180px;
  --page-hpad: clamp(12px, 3vw, 28px);

  /* Picker and control sizing (moved из компонентов) */
  --picker-min-width: 160px;
  --picker-toggle-padding: 12px;

  /* Contract execution spacing */
  --contract-meta-gap: 48px;

  /* Dashboard card defaults */
  --dashboard-card-width: 320px;

  /* Smeta card compact progress height */
  --smeta-compact-progress-height: 6px;

  /* Special kpi gap */
  --smeta-kpi-gap: 24px;

  /* Modal / toast / layout tokens */
  --modal-max-width: 880px;
  --modal-viewport-offset: 32px; /* used like calc(100vh - var(--modal-viewport-offset)) */
  --modal-mobile-border-radius: 10px;
  --modal-mobile-padding: 12px 12px 16px;

  --fab-offset: 24px; /* floating toast / action offsets */
  --slide-translate: 400px; /* used in slide-in keyframes */

  /* card min-heights */
  --category-card-min-height: 141px;
  --summary-card-min-height: 106px;

  /* small helper sizes */
  --hint-size: 22px;

  /* Modal table column defaults */
  --modal-col-first: 220px;
  --modal-col-second-min: 140px;
  --modal-col-second-max: 220px;
  --modal-col-third-min: 100px;
  --modal-col-third-max: 160px;
}

@media (min-width: 1024px) {
  :root {
    --card-frame-gap: var(--card-frame-gap-desktop);
    --card-inner-gap: var(--card-inner-gap-desktop);
  }
}

/* Тёмная тема: используется при наличии класса/атрибута на :root
   и включается автоматически через prefers-color-scheme. */
[data-theme='dark'],
.theme-dark {
  color-scheme: dark;
  --surface-base: #0f1625;
  --surface-overlay: #101828ee;
  --surface-highlight: #1b2435;
  --surface-contrast: #e6ecff;
  --bg: #0b1220;
  --bg-card: #141c2e;
  --bg-muted: #111827;
  --border-soft: #26314a;
  --border-neutral: #32405d;
  --border-faint: rgb(230 236 255 / 6%);
  --border-strong: #3d4f73;
  --text-main: #e8edf8;
  --text-inverse: #0b1220;
  --text-label-strong: #cbd4e5;
  --text-subtle: #c1c9dc;
  --text-muted: #9ba7bf;
  --text-soft: #7f8bac;
  --text-faint: #6d7897;
  --accent: #5c83ff;
  --brand-accent: #7ca6ff;
  --accent-strong: #8bb6ff;
  --accent-soft: #1e2c45;
  --danger: #ff7a70;
  --success: #2bb38f;
  --chevron-color: rgb(203 212 229 / 70%);
  --gradient-page: linear-gradient(180deg, #0b1220 0%, #111a2c 60%, #0b1220 100%);
  --gradient-skeleton: linear-gradient(90deg, var(--bg-muted) 25%, var(--bg-card) 50%, var(--bg-muted) 75%);
  --gradient-btn-airy: linear-gradient(180deg, #182338 0%, #121c2c 100%);
  --gradient-btn-airy-hover: linear-gradient(180deg, #1d2840 0%, #152033 100%);
  --gradient-btn-airy-desktop: linear-gradient(180deg, #1a263f 0%, #131d31 100%);
  --gradient-btn-airy-desktop-hover: linear-gradient(180deg, #1f2b45 0%, #172338 100%);
  --shadow-btn-airy-hover: 0 12px 32px rgb(92 131 255 / 16%);
  --shadow-btn-airy-active: 0 8px 22px rgb(92 131 255 / 14%);
  --shadow-btn-airy-desktop: 0 6px 16px rgb(232 237 248 / 6%);
  --shadow-btn-airy-desktop-hover: 0 8px 18px rgb(232 237 248 / 8%);
  --shadow-btn-airy-desktop-active: 0 4px 12px rgb(232 237 248 / 6%);
  --shadow-btn-primary: 0 10px 20px rgb(92 131 255 / 24%);
  --shadow-btn-primary-active: 0 6px 12px rgb(92 131 255 / 18%);
  --shadow-card: 0 12px 26px rgb(0 0 0 / 22%);
  --shadow-soft: 0 8px 20px rgb(0 0 0 / 16%);
  --shadow-strong: 0 14px 32px rgb(0 0 0 / 28%);
  --shadow-category-active: 0 18px 28px rgb(92 131 255 / 24%);
  --shadow-category-indicator: 0 6px 16px rgb(92 131 255 / 45%);
  --shadow-summary-hover: 0 10px 24px rgb(92 131 255 / 26%);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    color-scheme: dark;
    --surface-base: #0f1625;
    --surface-overlay: #101828ee;
    --surface-highlight: #1b2435;
    --surface-contrast: #e6ecff;
    --bg: #0b1220;
    --bg-card: #141c2e;
    --bg-muted: #111827;
    --border-soft: #26314a;
    --border-neutral: #32405d;
    --border-faint: rgb(230 236 255 / 6%);
    --border-strong: #3d4f73;
    --text-main: #e8edf8;
    --text-inverse: #0b1220;
    --text-label-strong: #cbd4e5;
    --text-subtle: #c1c9dc;
    --text-muted: #9ba7bf;
    --text-soft: #7f8bac;
    --text-faint: #6d7897;
    --accent: #5c83ff;
    --brand-accent: #7ca6ff;
    --accent-strong: #8bb6ff;
    --accent-soft: #1e2c45;
    --danger: #ff7a70;
    --success: #2bb38f;
    --chevron-color: rgb(203 212 229 / 70%);
    --gradient-page: linear-gradient(180deg, #0b1220 0%, #111a2c 60%, #0b1220 100%);
    --gradient-skeleton: linear-gradient(90deg, var(--bg-muted) 25%, var(--bg-card) 50%, var(--bg-muted) 75%);
    --gradient-btn-airy: linear-gradient(180deg, #182338 0%, #121c2c 100%);
    --gradient-btn-airy-hover: linear-gradient(180deg, #1d2840 0%, #152033 100%);
    --gradient-btn-airy-desktop: linear-gradient(180deg, #1a263f 0%, #131d31 100%);
    --gradient-btn-airy-desktop-hover: linear-gradient(180deg, #1f2b45 0%, #172338 100%);
    --shadow-btn-airy-hover: 0 12px 32px rgb(92 131 255 / 16%);
    --shadow-btn-airy-active: 0 8px 22px rgb(92 131 255 / 14%);
    --shadow-btn-airy-desktop: 0 6px 16px rgb(232 237 248 / 6%);
    --shadow-btn-airy-desktop-hover: 0 8px 18px rgb(232 237 248 / 8%);
    --shadow-btn-airy-desktop-active: 0 4px 12px rgb(232 237 248 / 6%);
    --shadow-btn-primary: 0 10px 20px rgb(92 131 255 / 24%);
    --shadow-btn-primary-active: 0 6px 12px rgb(92 131 255 / 18%);
    --shadow-card: 0 12px 26px rgb(0 0 0 / 22%);
    --shadow-soft: 0 8px 20px rgb(0 0 0 / 16%);
    --shadow-strong: 0 14px 32px rgb(0 0 0 / 28%);
    --shadow-category-active: 0 18px 28px rgb(92 131 255 / 24%);
    --shadow-category-indicator: 0 6px 16px rgb(92 131 255 / 45%);
    --shadow-summary-hover: 0 10px 24px rgb(92 131 255 / 26%);
  }
}
}
